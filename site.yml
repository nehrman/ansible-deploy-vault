---
- name: Configure Consul cluster and clients
  hosts: consul_instances
  order: sorted
  any_errors_fatal: true
  become: true
  become_user: root

  roles:
    - ansible-consul
  
- name: Configure Vault Servers
  hosts: vault_instances
  order: sorted
  any_errors_fatal: true
  become: true
  become_user: root
 
  roles:
    - ansible-vault


